{% extends "home/main.html" %}
{% load wp_tags %}
{% load paste_tags %}
{% block title %}- {{ listing_title }}{% endblock %}

{% block extrastyle %}
    <link type="text/css" rel="stylesheet" href="/static/css/paste.min.css"/>
{% endblock %}

{% block content %}
    <div class='paste-page-header'>
        <div class='paste-page-header-title'>
            <h3 class='header'>
                {{ listing_title }}
            </h3>
        </div>
        <div class='paste-button-box'>
            <!-- New paste button -->
            <a href='/paste'>
                <div id='paste-new' class='wpbutton paste-button'>
                    New Paste..
                </div>
            </a>
            {% if not listing_title|lower|contains:"latest" %}
                <!-- View latest -->
                <a href='/paste/latest'>
                    <div class='wpbutton paste-button'>
                        View Latest
                    </div>
                </a>
            {% endif %}
            {% if not listing_title|lower|contains:"top" %}
                <!-- View top -->
                <a href='/paste/top'>
                    <div class='wpbutton paste-button'>
                        View Top
                    </div>
                </a>
            {% endif %}
        </div>

    </div>
    <div class='paste-listing-surround'>
        <div class='paste-listing-box'>
            {% if not pastes %}
                <span class='paste-listing-none-text'>
                    No {{ listing_title|lower }} found.
                </span>
            {% else %}
                {# Build replies list. #}
                {% for paste in pastes %}
                    <div class='paste-item'>
                        <a href='/paste/?id={{ paste.paste_id }}'>
                            <div class='paste-item-title'>
                                {{ paste.title }}
                            </div>
                        </a>
                        <div class='paste-item-lang-label'>
                            Language:
                            <span class='paste-item-lang'>
                                {% if paste.language %}
                                    {{ paste.language }}
                                {% else %}
                                    text
                                {% endif %}
                            </span>
                        </div>
                        <div class='paste-item-date'>
                            {{ paste.publish_date|paste_time }}
                        </div>
                        <div class='paste-item-views'>
                            {{ paste.view_count }}
                            {% if paste.view_count == 1 %}
                                view
                            {% else %}
                                views
                            {% endif %}
                        </div>
                        {% if paste|child_count > 0 %}
                            {# Paste has replies of its own. #}
                            <div class='paste-item-replies'>
                                <a href='/paste/replies/?id={{ paste.paste_id }}'>
                                    {{ paste|child_count }}
                                    {% if paste|child_count == 1 %}
                                        reply...
                                    {% else %}
                                        replies...
                                    {% endif %}
                                </a>
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
{% endblock %}